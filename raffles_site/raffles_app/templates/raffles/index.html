{% extends "base.html" %}
{% load static %}



{% block title %}Gran Rifa de Motos{% endblock %}

{% block content %}


<!-- ðŸŽ¯ HERO + CARRUSEL -->
<section class="hero-carousel">
  {% if slides %}
    {% for slide in slides %}
      <div class="carousel-slide {% if forloop.first %}active{% endif %}">
        
        {% if slide.image %}
          <img src="{{ slide.image.url }}" alt="{{ slide.title|default:'Slide' }}">
     
        {% endif %}

        <div class="overlay">
          {% if slide.title %}
            <h1>{{ slide.title }}</h1>
          {% endif %}
          {% if slide.subtitle %}
            <p>{{ slide.subtitle }}</p>
          {% endif %}
          {% if slide.link %}
            <a href="{{ slide.link }}" class="btn">Participar</a>
          {% endif %}
        </div>
      </div>
    {% endfor %}

    <!-- Controles -->
    <div class="carousel-controls">
      <span class="prev"><i class="fas fa-chevron-left"></i></span>
      <span class="next"><i class="fas fa-chevron-right"></i></span>
    </div>
  {% else %}
    <div class="carousel-slide active">
      <div class="overlay">
        <h1>ðŸŽ‰ Bienvenido a RifasMotos</h1>
        <p style="height: 300px;">No hay slides configurados en este momento.</p>
      </div>
    </div>
  {% endif %}
</section>


<!-- =============================
      ðŸ”¹ Ganador de la rifa
  ============================== -->
<section id="winners-section">
  <div class="section-title">
    <h2>Ãšltimo Ganador</h2>
    <p class="subtitle">Transparencia en nuestras rifas</p>
  </div>

  <div class="winners">
    {% if raffle %}
    <!-- Columna izquierda: Card -->
    <div class="winners-card-wrapper">
      <div class="winners-minimap">
        <span>x: 0</span>
        <span>y: 0</span>
      </div>

      <!-- Tarjeta hologrÃ¡fica -->
      <div class="winners-card" role="region" aria-label="Tarjeta hologrÃ¡fica" data-active="false">
        <div class="winners-card-inner">
          
          <!-- Frente -->
          <div class="winners-card-front">
            <h3 class="winners-card-name">{{ raffle.motorcycle.brand }}</h3>

            <div class="winners-card-bg" 
                 style="background-image: url('{% static 'img/pngwing.png' %}');">
              <div class="winners-face-highlight"></div>
            </div>
            <div class="winners-glare"></div>

            <!-- Logos -->
            <section class="winners-logo-grid" aria-label="Marcas">
              {% for img in raffle.motorcycle.images.all %}
              <div class="winners-logo" style="--icon: url('{{ img.image.url }}')">
                <div class="winners-logo-icon"></div>
              </div>
              {% endfor %}
            </section>

            <!-- Marca de agua -->
            <div class="winners-card-watermark">
              <span class="modelo">{{ raffle.motorcycle.model }}</span>
              <span class="anio">{{ raffle.motorcycle.year }}</span>
              <span class="estado">
                {% if raffle.motorcycle.is_new %}Nueva{% else %}Usada{% endif %}
              </span>
            </div>

            <!-- Flecha -->
            <div class="winners-arrow">â†“</div>

            <!-- BotÃ³n flip -->
            <button class="winners-flip-btn" aria-pressed="false">
              <span>Voltear</span>
            </button>
          </div>

          <!-- Reverso -->
          <div class="winners-card-back">
            <div class="winners-card-bg" 
                 style="background: url('{% static 'img/back-pattern.png' %}') center/cover no-repeat;">
            </div>
            <div class="winners-glare"></div>

            <!-- Foto -->
            <div class="winners-photo">
              <img src="{% static 'img/persona.jpg' %}" alt="Foto del ganador">
            </div>

            <!-- Info -->
            <div class="winners-info">
              <h3 class="winners-name">
                {{ raffle.winner_ticket.user.get_full_name|default:raffle.winner_ticket.user.username }}
              </h3>
              <p class="winners-number">Ticket #{{ raffle.winner_ticket.number }}</p>
              <p class="winners-ig">
                <i class="fab fa-instagram"></i> @{{ raffle.winner_ticket.user.username }}
              </p>
            </div>
          </div>
        </div>
      </div>
    </div>
    {% else %}
    <p class="text-center">AÃºn no hay ganadores registrados.</p>
    {% endif %}
  </div>
</section>

<!-- como funciona -->

<section id="how-it-works" class="how-it-works">
  <div class="section-title">
    <h2>CÃ³mo funciona</h2>
    <p class="subtitle">Transparencia en cada paso</p>
  </div>

  <div class="steps">
    <div class="step">
      <i class="fas fa-shopping-cart"></i>
      <h3>Compra tu ticket</h3>
      <p>Elige el nÃºmero y realiza el pago de forma segura.</p>
    </div>
    <div class="step">
      <i class="fas fa-receipt"></i>
      <h3>Recibe tu comprobante</h3>
      <p>Tu ticket digital llegarÃ¡ al correo registrado.</p>
    </div>
    <div class="step">
      <i class="fas fa-gavel"></i>
      <h3>Sorteo en vivo</h3>
      <p>Transmitimos el sorteo de manera transparente.</p>
    </div>
    <div class="step">
      <i class="fas fa-motorcycle"></i>
      <h3>Â¡Gana tu moto!</h3>
      <p>Si tu nÃºmero es el ganador, la moto es tuya.</p>
    </div>
  </div>
</section>

<!-- testimonios -->

<section id="winners">
  <div class="section-title">
    <h2>Testimonios & Ganadores</h2>
    <p class="subtitle">Conoce la experiencia de quienes ya confiaron en nosotros</p>
  </div>

  <div class="winners-content">
    <!-- Bloque de testimonios -->
    <div class="testimonials">
      <div class="testimonial">
        <p>"Nunca pensÃ© que ganarÃ­a, pero aquÃ­ estoy con mi moto nueva ðŸš€. El proceso fue claro y transparente."</p>
        <h4>â€” Carlos G.</h4>
      </div>
      <div class="testimonial">
        <p>"Me encantÃ³ lo fÃ¡cil que fue comprar el ticket. Todo el sorteo lo transmitieron en vivo, 100% confiable."</p>
        <h4>â€” Andrea P.</h4>
      </div>
      <div class="testimonial">
        <p>"La experiencia fue increÃ­ble, Â¡y ahora soy dueÃ±a de una moto espectacular! ðŸ™Œ"</p>
        <h4>â€” SofÃ­a L.</h4>
      </div>
    </div>

    <!-- Instagram embed -->
    <div class="ig-embed">
      <iframe 
        src="https://www.instagram.com/tu_usuario/embed" 
        width="400" height="500" 
        frameborder="0" 
        scrolling="no" 
        allowtransparency="true">
      </iframe>
    </div>
  </div>
</section>


{% endblock %}
